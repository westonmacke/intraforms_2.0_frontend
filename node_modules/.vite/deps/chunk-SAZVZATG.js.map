{
  "version": 3,
  "sources": ["../../vuetify/src/composables/delay.ts", "../../vuetify/src/composables/focusTrap.ts", "../../vuetify/src/composables/scopeId.ts"],
  "sourcesContent": ["// Utilities\nimport { defer, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  let clearDelay: (() => void) = () => {}\n\n  function runDelay (isOpening: boolean, options?: { minDelay: number }) {\n    clearDelay?.()\n\n    const delay = isOpening ? props.openDelay : props.closeDelay\n\n    const normalizedDelay = Math.max(\n      options?.minDelay ?? 0,\n      Number(delay ?? 0)\n    )\n\n    return new Promise(resolve => {\n      clearDelay = defer(normalizedDelay, () => {\n        cb?.(isOpening)\n        resolve(isOpening)\n      })\n    })\n  }\n\n  function runOpenDelay () {\n    return runDelay(true)\n  }\n\n  function runCloseDelay (options?: { minDelay: number }) {\n    return runDelay(false, options)\n  }\n\n  return {\n    clearDelay,\n    runOpenDelay,\n    runCloseDelay,\n  }\n}\n", "// Utilities\nimport { nextTick, onBeforeUnmount, toRef, toValue, watch } from 'vue'\nimport { focusableChildren, IN_BROWSER, propsFactory } from '@/util'\n\n// Types\nimport type { Ref } from 'vue'\n\n// Types\nexport interface FocusTrapProps {\n  retainFocus: boolean\n  captureFocus: boolean\n  disableInitialFocus?: boolean\n}\n\n// Composables\nexport const makeFocusTrapProps = propsFactory({\n  retainFocus: Boolean,\n  captureFocus: Boolean,\n  /** @deprecated */\n  disableInitialFocus: Boolean,\n}, 'focusTrap')\n\nconst registry = new Map<symbol, {\n  isActive: Ref<boolean>\n  contentEl: Ref<HTMLElement | undefined>\n}>()\n\nfunction onKeydown (e: KeyboardEvent) {\n  const activeElement = document.activeElement as HTMLElement | null\n  if (e.key !== 'Tab' || !activeElement) return\n\n  const parentTraps = Array.from(registry.values())\n    .filter(({ isActive, contentEl }) => isActive.value && contentEl.value?.contains(activeElement))\n    .map(x => x.contentEl.value)\n\n  let closestTrap\n  let currentParent = activeElement.parentElement\n  while (currentParent) {\n    if (parentTraps.includes(currentParent)) {\n      closestTrap = currentParent\n      break\n    }\n    currentParent = currentParent.parentElement\n  }\n\n  if (!closestTrap) return\n\n  const focusable = focusableChildren(closestTrap)\n    // excluding VListItems with tabindex=\"-2\"\n    .filter(x => x.tabIndex >= 0)\n\n  if (!focusable.length) return\n\n  const active = document.activeElement as HTMLElement | null\n  if (\n    focusable.length === 1 &&\n    focusable[0].classList.contains('v-list') &&\n    focusable[0].contains(active)\n  ) {\n    e.preventDefault()\n    return\n  }\n\n  const firstElement = focusable[0]\n  const lastElement = focusable[focusable.length - 1]\n\n  if (\n    e.shiftKey &&\n    (\n      active === firstElement ||\n      (firstElement.classList.contains('v-list') && firstElement.contains(active))\n    )\n  ) {\n    e.preventDefault()\n    lastElement.focus()\n  }\n\n  if (\n    !e.shiftKey &&\n    (\n      active === lastElement ||\n      (lastElement.classList.contains('v-list') && lastElement.contains(active))\n    )\n  ) {\n    e.preventDefault()\n    firstElement.focus()\n  }\n}\n\nexport function useFocusTrap (\n  props: FocusTrapProps,\n  { isActive, localTop, activatorEl, contentEl }: {\n    isActive: Ref<boolean>\n    localTop: Readonly<Ref<boolean>>\n    activatorEl?: Readonly<Ref<HTMLElement | undefined>>\n    contentEl: Readonly<Ref<HTMLElement | undefined>>\n  }\n) {\n  const trapId = Symbol('trap')\n  watch(() => props.retainFocus, val => {\n    if (val) {\n      registry.set(trapId, { isActive, contentEl })\n    } else {\n      registry.delete(trapId)\n    }\n  }, { immediate: true })\n\n  let focusTrapSuppressed = false\n  let focusTrapSuppressionTimeout = -1\n\n  async function onPointerdown () {\n    focusTrapSuppressed = true\n    focusTrapSuppressionTimeout = window.setTimeout(() => {\n      focusTrapSuppressed = false\n    }, 100)\n  }\n\n  async function captureOnFocus (e: FocusEvent) {\n    const before = e.relatedTarget as HTMLElement | null\n    const after = e.target as HTMLElement | null\n\n    document.removeEventListener('pointerdown', onPointerdown)\n    document.removeEventListener('keydown', captureOnKeydown)\n\n    await nextTick()\n\n    if (\n      isActive.value &&\n      !focusTrapSuppressed &&\n      before !== after &&\n      contentEl.value &&\n      // We're the menu without open submenus or overlays\n      toValue(localTop) &&\n      // It isn't the document or the container body\n      ![document, contentEl.value].includes(after!) &&\n      // It isn't inside the container body\n      !contentEl.value.contains(after)\n    ) {\n      const focusable = focusableChildren(contentEl.value)\n      focusable[0]?.focus()\n    }\n  }\n\n  function captureOnKeydown (e: KeyboardEvent) {\n    if (e.key !== 'Tab') return\n    document.removeEventListener('keydown', captureOnKeydown)\n\n    if (\n      isActive.value &&\n      contentEl.value &&\n      e.target &&\n      !contentEl.value.contains(e.target as Element)\n    ) {\n      const allFocusableElements = focusableChildren(document.documentElement)\n\n      if (\n        (e.shiftKey && e.target === allFocusableElements.at(0)) ||\n        (!e.shiftKey && e.target === allFocusableElements.at(-1))\n      ) {\n        const focusable = focusableChildren(contentEl.value)\n        if (focusable.length > 0) {\n          e.preventDefault()\n          focusable[0].focus()\n        }\n      }\n    }\n  }\n\n  const shouldCapture = toRef(() => isActive.value && props.captureFocus && !props.disableInitialFocus)\n\n  IN_BROWSER && watch(shouldCapture, val => {\n    if (val) {\n      document.addEventListener('pointerdown', onPointerdown)\n      document.addEventListener('focusin', captureOnFocus, { once: true })\n      document.addEventListener('keydown', captureOnKeydown)\n    } else {\n      document.removeEventListener('pointerdown', onPointerdown)\n      document.removeEventListener('focusin', captureOnFocus)\n      document.removeEventListener('keydown', captureOnKeydown)\n    }\n  }, { immediate: true })\n\n  onBeforeUnmount(() => {\n    clearTimeout(focusTrapSuppressionTimeout)\n    document.removeEventListener('pointerdown', onPointerdown)\n    document.removeEventListener('focusin', captureOnFocus)\n    document.removeEventListener('keydown', captureOnKeydown)\n  })\n\n  IN_BROWSER && document.addEventListener('keydown', onKeydown)\n}\n", "// Utilities\nimport { getCurrentInstance } from '@/util'\n\nexport function useScopeId () {\n  const vm = getCurrentInstance('useScopeId')\n\n  const scopeId = vm!.vnode.scopeId\n\n  return { scopeId: scopeId ? { [scopeId]: '' } : undefined }\n}\n"],
  "mappings": "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",
  "names": ["makeDelayProps", "propsFactory", "closeDelay", "Number", "String", "openDelay", "useDelay", "props", "cb", "clearDelay", "runDelay", "isOpening", "options", "delay", "normalizedDelay", "Math", "max", "minDelay", "Promise", "resolve", "defer", "runOpenDelay", "runCloseDelay", "makeFocusTrapProps", "propsFactory", "retainFocus", "Boolean", "captureFocus", "disableInitialFocus", "registry", "Map", "onKeydown", "e", "activeElement", "document", "key", "parentTraps", "Array", "from", "values", "filter", "_ref", "isActive", "contentEl", "value", "contains", "map", "x", "closestTrap", "currentParent", "parentElement", "includes", "focusable", "focusableChildren", "tabIndex", "length", "active", "classList", "preventDefault", "firstElement", "lastElement", "shiftKey", "focus", "useFocusTrap", "props", "_ref2", "localTop", "activatorEl", "trapId", "Symbol", "watch", "val", "set", "delete", "immediate", "focusTrapSuppressed", "focusTrapSuppressionTimeout", "onPointerdown", "window", "setTimeout", "captureOnFocus", "before", "relatedTarget", "after", "target", "removeEventListener", "captureOnKeydown", "nextTick", "toValue", "allFocusableElements", "documentElement", "at", "shouldCapture", "toRef", "IN_BROWSER", "addEventListener", "once", "onBeforeUnmount", "clearTimeout", "useScopeId", "vm", "getCurrentInstance", "scopeId", "vnode", "undefined"]
}
